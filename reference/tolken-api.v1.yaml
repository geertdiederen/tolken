openapi: 3.0.0
info:
  title: tolken api
  version: '0.3'
  description: |-
    API voor gegevensuitwisseling tussen rijksonderdelen en tolken intermediairs (versie 3.5 Gegevensset)

    Algemene afspraken:
    Datum/tijd-veld gebruiken als timestamp eejjmmddhhmmmsmsms (eeuw jaar maand dag uur minuut milliseconde)

    Eigenaarschap API: Rijksoverheid (Justitie en Veiligheid, DJI) 
  contact:
    name: Geert Diederen
servers:
  - url: 'http://localhost:3000'
paths:
  /bestellingen:
    parameters: []
    post:
      summary: Bestellingen (Post)
      operationId: post-bestellingen
      responses:
        '201':
          description: Successfully wrote the data you sent
        '206':
          description: Partial Content
        '400':
          description: Bad Request
        '401':
          description: Authentication is missing or incorrect
          content:
            application/json:
              schema:
                type: object
        '403':
          description: 'Authentication succeeded, but the user does not have access to the resource'
        '404':
          description: 'The resource cannot be found, client-side error'
        '500':
          description: There was an error on the server-side
        '503':
          description: Service Unavailable
        '504':
          description: Gateway Timeout
      parameters:
        - schema:
            type: string
          in: query
      description: Plaats een bestelling voor een tolk of vertaler bij Intermediair
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Bestellen'
            examples:
              example-1: {}
          application/xml:
            schema:
              type: object
              properties: {}
          text/html:
            schema:
              $ref: '#/components/schemas/Bestelling'
          multipart/form-data:
            schema:
              type: object
              properties: {}
        description: Plaats een bestelling
  /matches:
    post:
      summary: Matches (Post)
      operationId: post-matches
      responses:
        '201':
          description: Successfully wrote the data you sent
        '401':
          description: Authentication is missing or incorrect
        '403':
          description: 'Authentication succeeded, but the user does not have access to the resource'
        '404':
          description: 'The resource cannot be found, client-side error'
        '406':
          description: Not Acceptable
        '500':
          description: There was an error on the server-side
      description: Geef matchingsinfo door aan Besteller
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Matchen'
          application/xml:
            schema:
              type: object
              properties: {}
          multipart/form-data:
            schema:
              type: object
              properties: {}
      parameters:
        - schema:
            type: string
          in: header
    parameters: []
  /accorderingen:
    parameters:
      - required: true
    post:
      summary: Accorderingen (Post)
      operationId: postakkorderingen
      responses:
        '201':
          description: Successfully wrote the data you sent
        '401':
          description: Authentication is missing or incorrect
        '403':
          description: 'Authentication succeeded, but the user does not have access to the resource'
        '404':
          description: 'The resource cannot be found, client-side error'
        '500':
          description: There was an error on the server-side
      description: Accordering (van bestelorganisatie/Rijksonderdeel) van geleverde dienst middels fiatteringsinfo richting intermediair
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Accorderen-prestatie'
  /leveringen:
    post:
      summary: Leveringen (Post)
      operationId: post-leveringen
      responses:
        '201':
          description: Successfully wrote the data you sent
        '401':
          description: Authentication is missing or incorrect
        '403':
          description: 'Authentication succeeded, but the user does not have access to the resource'
        '404':
          description: 'The resource cannot be found, client-side error'
        '406':
          description: Not Acceptable
        '500':
          description: There was an error on the server-side
      description: Geleverde dienstinformatie van tolken-intermediair voor bestelorganisatie (Rijksonderdeel)
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Leveren-prestatie'
        description: Doorgeven van dienstlevering tolk/vertaler
components:
  schemas:
    Algemeen:
      title: Algemeen
      type: object
      description: 'Algemene velden (kan ws weg uit API, zijn al opgenomen bij verschillende andere modellen waar ze gebruikt worden)'
      properties:
        Contractnummer:
          type: string
          description: |
            ID vh contract waaronder de tolkdienst besteld / uitgevoerd is. Uit systeem intermediair. Verplicht in te vullen bij matchen geplande bestelling.
        Naam Intermediair:
          type: string
          description: "Handelsnaam van de Opdrachtnemer\tUit systeem intermediair\n"
        Departemenet:
          type: string
          description: "Departement waaronder de bestellende organisatie resorteert\tDe exacte notatie van dit veld wordt afgestemd in de implementatiefase\n"
        Organisatie:
          type: string
          description: "\"Organisatienaam benodigd voor autorisatie van de bestelling (\"\"NP\"\", \"\"IND\"\", \"\"COA\"\", \"\"OM\"\", \"\"RvR\"\", \"\"DT&V\"\", etc)\nEenmalig in te voeren bij installatie APP\"\t\"Liefst éénmaal invoeren bij configuratie voorziening\nAls basisigegeven beschikbaar stellen bij bestelling. \nEventueel overschrijven per bestelling\nMoet gestandaardiseerd worden tbv management info; de exacte notatie van dit veld wordt afgestemd in de implementatiefase\"\n"
        Subonderdeel:
          type: string
          description: "Verbijzondering van de de gegevens bij Organisatie opdrachtgever, bijvoorbeeld een organisatie(onderdeel) of een afdeling \t\"Liefst éénmaal invoeren bij configuratie voorziening\nAls basisigegeven beschikbaar stellen bij bestelling. \nEventueel overschrijven per bestelling\nMoet gestandaardiseerd worden tbv management info; de exacte notatie van dit veld wordt afgestemd in de implementatiefase\"\n"
    Bestellen:
      title: Bestellen
      type: object
      description: |-
        Bestellingsvelden Gegevensset Tolk- en Vertaaldiensten. Elke tolk-/vertaaldienst begint met het bestellen van een tolkdienst. In deze stap levert de besteller alle noodzakelijke gegevens voor het leveren van een tolkdienst. 

        Onder deze stap wordt ook het wijzigen (Datum/tijd wijziging gevuld) en annuleren (Datum/tijd annulering gevuld) van een bestelling verstaan vanuit de besteller; N.B.: een wijziging of annulering(niet-levering) vanuit de Intermediair richting besteller wordt als afwijkende levering c.q. niet-levering gemeld (via matching module).

        combisleutelvelden bij wijziging of annulering vanuit besteller naar Intermediair: Identificatie besteller en Datum/tijd bestelling, maar om API zo beknopt mogelijk en voor algemeen gebruik te houden moeten sowieso alle verplicht in te vullen velden worden meegegeven richting intermediair. 
      properties:
        Organisatie:
          type: string
          description: "Algemeen veld.\n\n\"Organisatienaam benodigd voor autorisatie van de bestelling (\"\"NP\"\", \"\"IND\"\", \"\"COA\"\", \"\"OM\"\", \"\"RvR\"\", \"\"DT&V\"\", etc)\n\nEenmalig in te voeren bij installatie APP\"\t\"Liefst éénmaal invoeren bij configuratie voorziening\nAls basisigegeven beschikbaar stellen bij bestelling. \nEventueel overschrijven per bestelling\nMoet gestandaardiseerd worden tbv management info; de exacte notatie van dit veld wordt afgestemd in de implementatiefase\"\n"
        Subonderdeel:
          type: string
          description: "Algemeen veld.\n\nVerbijzondering van de de gegevens bij Organisatie opdrachtgever, bijvoorbeeld een organisatie(onderdeel) of een afdeling \t\"Liefst éénmaal invoeren bij configuratie voorziening\nAls basisigegeven beschikbaar stellen bij bestelling. \nEventueel overschrijven per bestelling\nMoet gestandaardiseerd worden tbv management info; de exacte notatie van dit veld wordt afgestemd in de implementatiefase\"\n"
        Inkoopordernummer:
          type: string
          description: "Het inkoopordernummer van de opdracht\tLiefst selecteren uit te configureren selectielijst, door gebruiker te overschrijven\n"
        Leveringswijze gevraagd:
          type: string
          description: "\"\"\"telefonisch\"\"; \"\"op locatie\"\"; \"\"conference call\"\"; \"\"video conference\"\"\"\tAls een gebruiker geautoriseerd is voor slechts één soort levering, kan dit afgeleid worden uit de autorisatie. Als een gebruikers voor beide soorten leveringen geauoriseerd is, zal dit opgeven moeten worden bij de bestelling.\n\n"
        Categorie gesprek:
          type: string
          description: "\"In overeenstemming met de vastgestelde lijst in de PDC:\nCongres\nDelegaties\nGehoor\nGesprek\nGroepen/Bijeenkomsten\nInterceptie\nMedisch/Zorg\nAlgemeen\nRechtshulp\nSchrijftolk\nVerhoor\nVertalen\nZitting/Rechtszaak\nGebaren-/Lipleestolk\"\t\n\nIn overeenstemming met de vastgestelde lijst in de PDC. Als een gebruiker geautoriseerd is voor slechts één soort tolkdienst, kan dit afgeleid worden uit de autorisatie. Als een gebruikers geauoriseerd is voor meerdere tolkdienst, zal dit opgeven moeten worden bij de bestelling.\n\n"
        Rbtv-taal:
          type: string
          description: "\"De te tolken taal conform Rbtv. Altijd van/naar Nederlands\nIndien niet-Nederlands, bv turks <-> engels dan handmatig afhandelen\"\tDoor besteller in te vullen, te kiezen uit lijst Rbtv, handmatig te overschrijven\n"
        Taalniveau gevraagd:
          type: string
          description: "Het benodigde taalniveau voor de opdracht. Keuze B2 of C1.\tDoor besteller in te vullen/te selecteren"
        Specifieke vaardigheden:
          type: string
          description: "\"Relevante kavelcriteria: Medisch advies (IND); AG, GGD, Zorg (COA)\nMogelijk andere: Keuze uit gerechtstolk (OM) , gezondheidstolk (DJI), RvdK-tolk (RvdK), andere? Dit door intermediair te administreren want staat niet in RBTV! \nNB nu alleen specialisme voor gerechtstolk in RBTV! \"\tUit lijst of vrij tekstveld\n"
        Screeningsniveau:
          type: string
          description: "\"Geen of wel screening benodigd\nStandaard: \"\"VOG80\"\", \nAdditioneel: IND verklaring\nAdditioneel: \"\"VGB\"\"; = Verklaring Geen Bezwaar (screening door NP)\"\tDoor besteller in te vullen\n"
        Geslacht (voorkeur):
          type: string
          description: "\"Optioneel kan een voorkeur worden opgegeven: \"\"m\"\" of \"\"v\"\"\nOverige voorkeuren, bijvoorbeeld cultureel worden als vrije tekst of mondeling doorgegeven\"\tDoor besteller in te vullen\n"
        Aanvullende wensen:
          type: string
          description: "\"Vrij teksveld waarin aanvullende wensen/voorkeuren opgegeven kunnen worden, bijvoorbeeld: \n- voorkeurstolk\n- vooraf overleg gewenst\n- nationaliteit e.d.\"\tDoor besteller in te vullen\n"
        Referentie opdrachtgever:
          type: string
          description: "Identificatie van de opdracht, in de meeste gevallen het zaak-/dossiernummer \tDoor besteller in te vullen\n"
        Identificatie besteller:
          type: string
          description: "Unieke identificatie van de besteller\t\"Af te stemmen tijdens de implementatie\n\"\n"
        Naam besteller:
          type: string
          description: "\"Voor- + achternaam v.d. besteller (bij gepland bestellen)\nKan ook alias zijn\"\t\"Uit SAML bericht/bekend bij intermediair/in te voeren door besteller (liefst éénmaal bij configuratie)\n\"\n"
        Telefoonnummer besteller:
          type: string
          description: "\"Telefoonnummer van de besteller (bij gepland bestellen)\nKan ook algemeen nummer zijn\"\tUit SAML bericht/bekend bij intermediair/in te voeren door besteller (liefst éénmaal bij configuratie)\n"
        E-mail besteller:
          type: string
          description: "\"email van de besteller (bij gepland bestellen)\nKan ook alias of algemeen e-mail nummer zijn\"\tUit SAML bericht/bekend bij intermediair/in te voeren door besteller (liefst éénmaal bij configuratie)\n"
        Datum/tijd gepland begin:
          type: string
          description: "De datum/tijd van het geplande begin van de tolkdienst\tDoor besteller in te vullen\n"
        Datum/tijd gepland eind:
          type: string
          description: "De datum/tijd van het geplande einde van de tolkdienst\tDoor besteller in te vullen\n"
        Voorbereidingstijd:
          description: "De duur van de voorbereidingstijd in minuten indien van toepassing\tDoor besteller in te vullen\n"
          type: number
        Gesprekslocatie:
          type: string
          description: "In geval van tolken op locatie de locatie- & contactgegevens voor het te tolken gesprek\tDoor besteller in te vullen\n"
        Naam gespreksvoerder:
          type: string
          description: "\"Voor- + achternaam v.d. gespreksvoerder\nKan ook alias zijn\"\t\"Is de 'naam besteller' als gespreksvoerder de aanvraag doet\nKan ook alias zijn\"\n"
        Info ten behoeve van tolk:
          type: string
          description: "Extra informatie die voor de tolk van belang is\tDoor besteller in te vullen\n"
        Datum/tijd bestelling:
          type: string
          description: "De datum/tijd waarop de aanvraag van de tolkdienst bij de opdrachtnemer is binnengekomen\tVastleggen\n"
        Datum/tijd wijziging:
          type: string
          description: "\"De datum/tijd waarop de wijziging van de aanvraag bij de opdrachtnemer is binnengekomen\nAlleen invullen als er ook een wijziging is, dan verplicht\n\"\tVastleggen\n"
        Datum/tijd annulering:
          type: string
          description: "\"De datum/tijd waarop de annnulering van de aanvraag de aanvraag bij de opdrachtnemer is binnengekomen\nAlleen invullen als er ook een annulering is, dan verplicht\"\tVastleggen\n"
      required:
        - Organisatie
        - Inkoopordernummer
        - Leveringswijze gevraagd
        - Categorie gesprek
        - Rbtv-taal
        - Identificatie besteller
        - Naam besteller
        - Telefoonnummer besteller
        - E-mail besteller
        - Datum/tijd gepland begin
        - Datum/tijd gepland eind
        - Gesprekslocatie
        - Naam gespreksvoerder
        - Datum/tijd bestelling
    Matchen:
      title: Matchen
      type: object
      description: |-
        Matchingsvelden die doorgegeven worden aan besteller na het matchen tussen geplaatste bestellingsverzoek en wat beschikbaar is bij Intermediair. 

        Sleutelveldencombi: Identificatie besteller (module Bestellen) en Datum/tijd bestelling (module Bestellen).
        Verder worden vanuit Matching de Algemene velden verplicht meegegeven (waarvan sommigen ´teruggegeven´) aan Betelorganisatie. 
      properties:
        Contractnummer (Algemeen):
          type: string
        Naam intermediair (Algemeen):
          type: string
        Organisatie (Algemeen):
          type: string
        Onderdeel (Algemeen):
          type: string
        Subonderdeel (Algemeen):
          type: string
        Identificatie besteller (sleutel):
          type: string
        Datum/tijd bestelling (sleutel):
          type: string
        Opdrachtnummer intermediair:
          type: string
          description: "Unieke identificatie van de bestelling/opdracht (=opdrachtnummer)\t\"Door intermediair toegekende identificatie van\nopdracht. Automatisch bepaald.\"\n"
        Naam tolk:
          type: string
          description: "Naam van de tolk (of rbtv nr), zodat opdrachtgever weet met wie hij/zij te maken heeft\tUit systeem intermediair (bron RBTV)\n"
        Rbtv-nummer:
          type: string
          description: "Het Rbtv nummer van de tolk\tUit systeem Rbtv of geen invoer\n"
        Taalniveau geleverd:
          type: string
          description: "Het geleverde taalniveau voor de opdracht\tDoor intermediar in te vullen\n"
        Leveringswijze geleverd:
          type: string
          description: "\"\"\"telefonisch\"\"; \"\"op locatie\"\"; \"\"conference call\"\"; \"\"video conference\"\"\"\tDoor intermediar in te vullen\n"
        Afwijkende levering:
          type: string
          description: Door intermediair in te vullen
        Motivatie afwijkende levering:
          type: string
          description: |-
            (als ander taalniveau gematcht dan 1 van onderstaande verlicht op te geven)
            Mogelijke opties zijn:
            - Afwijking van besteld taalniveau a.g.v. spoedeisend werkzaamheden binnen een bepaald tijdsbestek
            - Afwijking van besteld taalniveau a.g.v. een plotselinge piekbelasting
            - Afwijking van besteld taalniveau a.g.v. de vraag naar uitzonderlijke talen(
        Verklaring niet-leveren:
          type: string
          description: "\"Indien een Opdrachtnemer toch niet in staat is om een Tolkopdracht te leveren\nOp het moment dat het voorkomt is het verplicht\"\tZie DAP voor wanneer er sprake is van niet leveren.\nMogelijke opties zijn:\n- Geen tolk in de bestelde taal\n- Geen tolk beschikbaar in de bestelde taal\n- Geen tolk beschikbaar in het overeengekomen/bestelde taalniveau\n- Geplande tolk uitgevallen wegens ziekte of zwaarwegende persoonlijke omstandigheden en er is geen / niet tijdig een andere geschikte tolk beschikbaar\n- Geplande tolk uitgevallen a.g.v. weers- of verkeersomstandigheden, omzetten naar een tolkdienstverlening op afstand is niet mogelijk\n"
        Inbelnummer:
          type: string
          description: "Telefoonnummer waarop gespreksvoerder dient in te bellen om tolksessie te starten\tUit systeem intermediair\n"
        Inloggegevens (video):
          type: string
          description: "In geval van video-tolken. Wordt door intermediair verstrekt\tUit systeem intermediair\n"
        Datum/tijd bevestiging:
          type: string
          description: "De datum/tijd waarop de tolkdienst bevestigd is\tUit systeem intermediair\n"
        Rbtv-taal (Afwijkende levering):
          type: string
        Taalniveau (Afwijkende levering):
          type: string
        Specifieke vaardigheden (Afwijkende levering):
          type: string
        Screeningsniveau (Afwijkende levering):
          type: string
        Geslacht (Afwijkende levering):
          type: string
      required:
        - Contractnummer (Algemeen)
        - Naam intermediair (Algemeen)
        - Organisatie (Algemeen)
        - Onderdeel (Algemeen)
        - Subonderdeel (Algemeen)
        - Identificatie besteller (sleutel)
        - Datum/tijd bestelling (sleutel)
        - Opdrachtnummer intermediair
        - Naam tolk
        - Rbtv-nummer
        - Taalniveau geleverd
        - Leveringswijze geleverd
        - Datum/tijd bevestiging
    Leveren-prestatie:
      title: Leveren prestatie
      type: object
      description: |-
        De daadwerkelijke leveringsgegevens van de tolk-/vertaaldienst aan de bestelorganisatie èn hetzelfde wordt vervolgens gebruikt voor de accordering door de bestelorganisatie. 

        De sleutels zijn Handelsnaam Intermediair (module Algemeen) en Opdrachtnummer intermediair (module Matchen)
      properties:
        Handelsnaam intermediair (sleutel):
          type: string
        Opdrachtnummer intermediair (sleutel):
          type: string
        Datum/tijd begin:
          type: string
          description: "De datum/tijd dat de tolkdienst daadwerkelijk is gestart\t\"Uit systeem service provider/intermediair (op afstand)\nDoor tolk in te vullen (op locatie)\"\n"
        Datum/tijd eind:
          type: string
          description: "De datum/tijd dat de tolkdienst daadwerkelijk is geeindigd\t\"Uit systeem service provider/intermediair (op afstand)\nDoor tolk in te vullen (op locatie)\"\n"
        Naam tolk (Matchen):
          type: string
          description: Tijdens leveren van de prestatie zou het kunnen zjn dat een andere tolk optreedt
        Rbtv-nummer (Matchen):
          type: string
          description: Tijdens leveren van de prestatie zou het kunnen zjn dat een andere tolk optreedt
        Voorbereidingstijd (Bestellen):
          type: string
          description: Tijdens leveren van de prestatie zou het kunnen zjn dat een andere voorbereidingstijd benut is. in minuten.
      required:
        - Handelsnaam intermediair (sleutel)
        - Opdrachtnummer intermediair (sleutel)
        - Datum/tijd begin
        - Datum/tijd eind
    Accorderen-prestatie:
      title: Accorderen-prestatie
      type: object
      description: |-
        Het accorderen van de geleverde prestatie vindt plaats door de bestelorganisatie (Rijksonderdeel).

        De sleutels zijn Handelsnaam intermediair (module Algemeen) en Opdrachtnummer intermediair (module Matchen)
      properties:
        Handelsnaam intermediair (sleutel):
          type: string
        Opdrachtnummer intermediair (sleutel):
          type: string
        Prestatie akkoord verklaarder:
          type: string
      required:
        - Handelsnaam intermediair (sleutel)
        - Opdrachtnummer intermediair (sleutel)
        - Prestatie akkoord verklaarder
  securitySchemes:
    API Key - 1:
      name: API Key
      type: apiKey
      in: query
